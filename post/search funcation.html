<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>纯静态网站 5 分钟加上完美中文搜索 —— Pagefind 完整教程</title>
<base href="/post/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --primary: #0066ff; --gray: #f6f8fa; --dark: #24292e; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.7; color: #333; background: #fff; margin: 0; padding: 0; }
    .container { max-width: 960px; margin: 0 auto; padding: 2rem 1rem; }
    h1, h2, h3 { color: var(--dark); }
    pre { background: var(--gray); padding: 1rem; border-radius: 8px; overflow-x: auto; position: relative; }
    code { font-family: Consolas, Monaco, 'Courier New', monospace; font-size: 0.95em; }
    .copy { position: absolute; top: 8px; right: 8px; background: var(--primary); color: #fff; border: none; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8em; }
    .copy:hover { background: #0050cc; }
    .step { background: #f0f8ff; padding: 1.5rem; border-radius: 10px; margin: 2rem 0; border-left: 5px solid var(--primary); }
    footer { text-align: center; padding: 3rem; color: #666; font-size: 0.9em; }
    @media (prefers-color-scheme: dark) {
      body { background: #0d1117; color: #c9d1d9; }
      pre, .step { background: #161b22; }
      h1,h2,h3 { color: #58a6ff; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>纯静态网站 5 分钟加上完美中文搜索</h1>
    <p><strong>适用人群：</strong>纯 HTML 网站、GitHub Pages、Netlify、Vercel 静态部署等</p>
    <p><strong>最终效果：</strong>支持中文分词、拼音、模糊搜索、结果高亮、完全离线、仅 60KB</p>

    <div class="step">
      <h2>第 1 步：生成搜索索引（只需跑一次命令）</h2>
      <p>打开终端（Windows: cmd / PowerShell，Mac: Terminal），cd 到你的网站根目录，然后执行：</p>
      <pre><code id="cmd1">npx pagefind --site .</code><button class="copy" onclick="copyCode('cmd1')">复制</button></pre>
      <p>执行完后，网站根目录会多一个 <code>_pagefind</code> 文件夹，<strong>部署时一定要一起上传！</strong></p>
    </div>

    <div class="step">
      <h2>第 2 步：在任意页面加入以下 3 段代码</h2>
      <p>复制下面整段代码，粘贴到你想显示搜索框的页面（推荐所有页面都加）</p>

      <pre><code id="code1">&lt;!-- 1. 引入样式（放在 &lt;head&gt; 里） --&gt;
&lt;link href="/_pagefind/pagefind-ui.css" rel="stylesheet"&gt;

&lt;!-- 2. 搜索框容器（放在你想出现的位置） --&gt;
&lt;div id="search"&gt;&lt;/div&gt;

&lt;!-- 3. 引入脚本并启动（放在 &lt;/body&gt; 前面） --&gt;
&lt;script src="/_pagefind/pagefind-ui.js"&gt;&lt;/script&gt;
&lt;script&gt;
  window.addEventListener('DOMContentLoaded', () => {
    new PagefindUI({
      element: "#search",
      showSubResults: true,
      excerptLength: 18,
      resetStyles: false,
      translations: {
        placeholder: "搜索本站内容...",
        zero_results: "未找到「[QUERY]」相关内容",
        many_results: "找到 [COUNT] 条结果"
      }
    });
  });
&lt;/script&gt;</code><button class="copy" onclick="copyCode('code1')">复制整段</button></pre>
    </div>

    <div class="step">
      <h2>第 3 步：以后更新网站只需要 2 步</h2>
      <ol>
        <li>修改或新增 HTML 文件</li>
        <li>重新执行一次：<br><pre><code id="cmd2">npx pagefind --site .</code><button class="copy" onclick="copyCode('cmd2')">复制</button></pre></li>
        <li>把整个网站（包括 _pagefind 文件夹）上传即可</li>
      </ol>
    </div>

    <div class="step">
      <h2>可选：让搜索更精准（强烈推荐）</h2>
      <p>在正文内容上加上以下属性，排除页眉页脚噪音：</p>
      <pre><code id="code2">&lt;article data-pagefind-body&gt;
  &lt;h1 data-pagefind-weight="10"&gt;文章标题（权重最高）&lt;/h1&gt;
  &lt;p&gt;这里是正文内容，会被完整搜索...&lt;/p&gt;
&lt;/article&gt;

&lt;!-- 导航、页脚不想被搜到加这个 --&gt;
&lt;header data-pagefind-ignore&gt;...&lt;/header&gt;
&lt;footer data-pagefind-ignore&gt;...&lt;/footer&gt;</code><button class="copy" onclick="copyCode('code2')">复制</button></pre>
    </div>

    <h2>完整示例（直接复制当首页用）</h2>
    <pre><code id="full">&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;我的网站&lt;/title&gt;
  &lt;link href="/_pagefind/pagefind-ui.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;欢迎来到我的纯静态网站&lt;/h1&gt;
  
  &lt;!-- 搜索框 --&gt;
  &lt;div style="max-width:640px;margin:40px auto;"&gt;
    &lt;div id="search"&gt;&lt;/div&gt;
  &lt;/div&gt;

  &lt;script src="/_pagefind/pagefind-ui.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    new PagefindUI({ element: "#search", excerptLength: 18 });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code><button class="copy" onclick="copyCode('full')">复制完整页面</button></pre>

    <p style="text-align:center; margin:3rem 0; font-size:1.5rem;">
      搞定！现在你的纯静态网站就拥有了顶级中文搜索体验
    </p>
  </div>

  <footer>
    Pagefind 官方：https://pagefind.app<br>
    教程制作者：2025 年最新纯静态最优解
  </footer>

  <script>
    function copyCode(id) {
      const code = document.getElementById(id).textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('已复制到剪贴板！');
      });
    }
  </script>
</body>
</html>